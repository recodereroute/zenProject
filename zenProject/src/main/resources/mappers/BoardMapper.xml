<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappers.BoardMapper">

<sql id="boardNo">
		select nvl(max(board_NO),0) + 1 from board
</sql>

<insert id="boardWrite" >
	insert into Board(
	
	board_no,board_title,board_con,board_cnt,mem_id, board_date,board_file
	,board_org_file,board_file_size
	)
	
	values(
	(<include refid="boardNo"/>),#{boardTitle},#{boardCon},0,#{memId},sysdate,
	<if test="boardFile == null">null,null,null</if>
	<if test="boardFile != null">
		#{boardFile},#{boardOrgFile},#{boardFileSize}
	</if>
	)

</insert>
<select id="boardList"  parameterType="Model.BoardDTO" resultType="Model.BoardDTO">
select 
		Board_NO boardNo, board_title boardTitle,BOARD_CON boardCon, 
		BOARD_DATE boardDate, BOARD_FILE, BOARD_CNT boardCnt,
		MEM_ID memId
		from BOARD 
		


</select>
<update id="boardCnt" parameterType="string" >
	update board
	set board_Cnt =board_Cnt +1
	where board_NO= #{boardNo}
</update>
<select id="boardDetail" parameterType="string" resultType="Model.BoardDTO">
select board_NO boardNo, board_title boardTitle,board_con boardCon, 
		board_date boardDate, board_FILE, board_Cnt boardCnt,
		mem_id memID ,board_org_file boardOrgFile,board_file_size boardFileSize
		from board
		where board_no= #{boardNo}
</select>
<update id="boardModify" parameterType="Model.BoardDTO">
		update board
		set board_title = #{boardTitle}, board_Con = #{boardCon} ,
		
		<if test="boardFile == null">board_org_file = null,board_file_size = null, board_file = null</if>
		<if test="boardFile != null">
		board_org_file =#{boardOrgFile},
		board_file_size =#{boardFileSize},
		board_file=#{boardFile}
		</if>
		where board_no = #{boardNo}
	</update>


</mapper>